//
// Biscuit Javascript Framework - Web 2.0 client-side compliment to the PHP back end.
// Requires jQuery and jQuery UI
//
// Author: Peter Epp

var Biscuit={Version:"1.3.7",Debug:false,Language:"en_CA",TranslationsLoaded:false,Console:{log:function(e){if(window.console!=undefined&&window.console.log!=undefined&&Biscuit.Debug){console.log(e)}}},Cookie:function(e,t,n){if(arguments.length>1&&String(t)!=="[object Object]"){n=jQuery.extend({},n);if(t===null||t===undefined){n.expires=-1}if(typeof n.expires==="number"){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}t=String(t);return document.cookie=[encodeURIComponent(e),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var s,o=n.raw?function(e){return e}:decodeURIComponent;return(s=(new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)")).exec(document.cookie))?o(s[1]):null},Crumbs:{ApplyCommonButtonStyles:function(e){if(e==undefined||typeof e!="string"){var e="body"}$(e+" .delete-button").button({icons:{primary:"ui-icon-trash"}});$(e+" .new-button").button({icons:{primary:"ui-icon-plus"}});$(e+" .edit-button").button({icons:{primary:"ui-icon-pencil"}});$(e+" .cancel-button").button({icons:{primary:"ui-icon-cancel"}});$(e+" .file-button").button({icons:{primary:"ui-icon-document"}});$(e+" .image-button").button({icons:{primary:"ui-icon-image"}});$(e+" .media-button").button({icons:{primary:"ui-icon-video"}});$(e+" .save-button").button({icons:{primary:"ui-icon-disk"}});$(e+" .prev-button").button({icons:{primary:"ui-icon-triangle-1-w"}});$(e+" .next-button").button({icons:{secondary:"ui-icon-triangle-1-e"}});$(e+" .prev-button-bigjump").button({icons:{primary:"ui-icon-seek-prev"}});$(e+" .next-button-bigjump").button({icons:{secondary:"ui-icon-seek-next"}});$(e+" .seek-first-button").button({icons:{primary:"ui-icon-seek-first"}});$(e+" .seek-last-button").button({icons:{secondary:"ui-icon-seek-end"}});$(e+" .documents-button").button({icons:{primary:"ui-icon-document"}});$(e+" .images-button").button({icons:{primary:"ui-icon-image"}});$(e+" .videos-button").button({icons:{primary:"ui-icon-video"}});$(e+" .security-button").button({icons:{primary:"ui-icon-key"}});$(e+" .lock-button").button({icons:{primary:"ui-icon-locked"}});$(e+" .unlock-button").button({icons:{primary:"ui-icon-unlocked"}});$(e+" .home-button").button({icons:{primary:"ui-icon-home"}});$(e+" .flag-button").button({icons:{primary:"ui-icon-flag"}});$(e+" .mail-button").button({icons:{primary:"ui-icon-mail-closed"}});$(e+" .comment-button").button({icons:{primary:"ui-icon-comment"}});$(e+" .calendar-button").button({icons:{primary:"ui-icon-calendar"}})},RelativeTimeUpdate:function(){if($(".relative-date").length==0){return}var e=new Date;var t=new Date;t.setHours(0);t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0);var n=new Date;n.setTime(t.getTime()+86400*1e3);$(".relative-date").each(function(){var r=$(this).data("date");if(!r){return}var i=new Date;i.setTime(Date.parse(r));var s=(i-e)/1e3;if(s==0){$(this).text(__("time_now"))}else if(s>-60&&s<=-1){$(this).text(__("time_under_minute_ago"))}else if(s>=1&&s<60){$(this).text(__("time_in_under_minute"))}else{var o=s/60;var u=s/3600;var a=s/86400;var f=null;var l=null;var c=null;if(o>-60&&o<=-1){if(Math.round(Math.abs(o))!=1){f=__("time_minutes")}else{f=__("time_minute")}l=Math.round(Math.abs(o));c=true}else if(o>=1&&o<60){if(Math.round(Math.abs(o))!=1){f=__("time_minutes")}else{f=__("time_minute")}l=Math.round(o);c=false}else if(u<=-1&&i>=t){if(Math.round(Math.abs(u))!=1){f=__("time_hours")}else{f=__("time_hour")}l=Math.round(Math.abs(u));c=true}else if(u>=1&&i<=n){if(Math.round(Math.abs(u))!=1){f=__("time_hours")}else{f=__("time_hour")}l=Math.round(u);c=false}if(f!==null&&l!==null&&c!==null){var h=l+" "+f;if(c){var p=__("date_ago",[h])}else{var p=__("date_in",[h])}}else{if(a>=1&&a<2){var p=__("date_tomorrow_at",[i.format("shortTime")])}else if(a>=-1&&a<0){var p=__("date_yesterday_at",[i.format("shortTime")])}else if(Math.abs(a)<7){var p=__("date_at",[i.format("dddd"),i.format("shortTime")])}else{if(i.format("yyyy")!=e.format("yyyy")){var d="mmmm dS, yyyy"}else{var d="mmmm dS"}var p=__("date_at",[i.format(d),i.format("shortTime")])}}$(this).text(p)}});setTimeout("Biscuit.Crumbs.RelativeTimeUpdate();",1e3)},ShowThrobber:function(e){if(e===undefined||e===null){var e="throbber"}if(window.top.$("#"+e).length>0){window.top.$("#"+e).show()}},HideThrobber:function(e){if(e===undefined||e===null){var e="throbber"}if(window.top.$("#"+e).length>0){window.top.$("#"+e).hide()}},ShowCoverThrobber:function(e,t){if(t===undefined){var t=""}if($("#"+e+"-throbber").length>0){$("#"+e+"-throbber").text(t)}else{var n=$("#"+e).css("position");if(n!="relative"&&n!="absolute"){$("#"+e).css({position:"relative"})}$("#"+e).css({overflow:"visible"});$("#"+e).append($("<div>").attr("id",e+"-throbber-cover").css({width:$("#"+e).width()+"px",height:$("#"+e).height()+"px",visibility:"hidden",position:"absolute",left:"0",top:"0","z-index":"10000",background:"transparent url(/framework/themes/sea_biscuit/images/cover-bg.png)"}).append($("<div>").attr("id",e+"-throbber").css({visibility:"hidden",position:"absolute",left:"0",top:"0",width:"100%",padding:"50px 0 0","text-align":"center","font-size":"20px",color:"#fff","font-family":"'Lucida Grande', 'Lucida Sans Unicode', sans-serif",background:"url(/framework/themes/sea_biscuit/images/throbber.gif) center 5px no-repeat"}).text(t)));if($("#"+e+"-throbber").height()+50>$("#"+e).height()){$("#"+e+"-throbber").text("").css({height:"1px"});if($("#"+e).height()<50){$("#"+e+"-throbber-cover").css({height:"50px"})}}var r=$("#"+e+"-throbber-cover").height()/2-($("#"+e+"-throbber").height()+55)/2+"px";$("#"+e+"-throbber").css({visibility:"visible",top:r});$("#"+e+"-throbber-cover").css({display:"none",visibility:"visible"}).fadeIn("fast")}},HideCoverThrobber:function(e){$("#"+e+"-throbber-cover").fadeOut("fast",function(){$(this).remove();$("#"+e).css({position:"",overflow:""})})},Alert:function(e,t,n,r){var i=new Date;var s=i.getTime();var o="biscuit-alert-content-"+s;$("body").append($("<div>").attr("id",o).css({display:"none"}).html(e));if(t==undefined){var t=__("notice")}if(r==undefined||r==""){var r=__("dismiss_button_label")}var u={};u[r]=function(){$(this).dialog("close")};return $("#"+o).dialog({modal:true,title:t,width:560,position:"center",show:"fade",hide:"fade",resizable:false,close:function(e,t){$("#"+o).remove();if(n!=undefined&&typeof n=="function"){n()}},buttons:u})},LoadingBox:function(e){var t=new Date;var n=t.getTime();var r="biscuit-alert-content-"+n;if(e==undefined){var e=__("wait_while_loading")}e='<h4 style="text-align: center"><strong>'+e+'</strong></h4><p style="text-align: center"><img src="/framework/themes/sea_biscuit/images/throbber-light-lrg.gif" alt="'+__("wait_while_loading")+'"></p>';$("body").append($("<div>").attr("id",r).css({display:"none"}).html(e));return $("#"+r).dialog({modal:true,title:__("wait_dialog_title"),width:560,position:"center",show:"fade",hide:"fade",resizable:false,close:function(e,t){$("#"+r).remove()},buttons:{}})},Confirm:function(e,t,n,r,i){var s=new Date;var o=s.getTime();var u="biscuit-confirmation-content-"+o;$("body").append($("<div>").attr("id",u).css({display:"none"}).html(e));var a={};if(n==undefined){var n=__("confirm_button_label")}if(i==undefined){var i=__("cancel_button_label")}a[n]=function(){t();$(this).dialog("close")};a[i]=function(){if(r!=undefined&&typeof r=="function"){r()}$(this).dialog("close")};return $("#"+u).dialog({modal:true,closeOnEscape:false,title:__("confirm_box_title"),width:560,position:"center",show:"fade",hide:"fade",resizable:false,open:function(e,t){$("#"+u).prev().find(".ui-dialog-titlebar-close").hide();$("#"+u).next(".ui-dialog-buttonpane").find("button:first").addClass("attention")},close:function(e,t){$("#"+u).remove()},buttons:a})},Sortable:{create:function(e,t,n){if(window.sortable_request_token==undefined&&window.sortable_token_form_id==undefined){Biscuit.Console.log("No request token or form id provided for sortable, aborting");return}if(n.hoverclass!==undefined){$("#"+container+" "+tag).mouseover(function(){$(this).addClass(n.hoverclass)});$("#"+container+" "+tag).mouseover(function(){$(this).removeClass(n.hoverclass)})}var r=n.array_name||"sort_array";var i=n.onUpdate||function(){};var s=n.onFinish||function(){};var o=n.onError||function(){};var u=n.action||"resort";var a=n.throbber_id||null;var f={tolerance:"pointer",update:function(e,n){var o=this.id;i(o);var f=$("#"+this.id).sortable("serialize",{key:r+"[]"});f+="&request_token="+window.sortable_request_token+"&token_form_id="+window.sortable_token_form_id;var l=t+"/"+u;Biscuit.Crumbs.ShowThrobber(a);Biscuit.Ajax.Request(l,"server_action",{data:f,type:"post",complete:function(){Biscuit.Crumbs.HideThrobber(a);s(o)}})}};if(n.axis!=undefined){f.axis=n.axis}if(n.handle!=undefined){f.handle=n.handle}$(e).sortable(f);$(e).disableSelection()}},Forms:{btn_text:{},DisableSubmit:function(e){window.top.$("#"+e+" .SubmitButton").each(function(){Biscuit.Crumbs.Forms.btn_text[e]=$(this).val();$(this).blur();$(this).attr("disabled","disabled");$(this).addClass("working");$(this).val(" ")});$("body").css({cursor:"progress"})},EnableSubmit:function(e){window.top.$("#"+e+" .SubmitButton").each(function(){$(this).removeAttr("disabled");$(this).removeClass("working");$(this).val(Biscuit.Crumbs.Forms.btn_text[e])});$("body").css({cursor:""})},Submit:function(e){$("#"+e).unbind("submit");$("#"+e).submit()},AddDeleteConfirmationHandlers:function(){$(".delete-button").live("click",function(){var item_type=null;var item_title=null;var additional_text=null;if($(this).attr("rel")!=undefined&&$(this).attr("rel")!=""){var rel_bits=$(this).attr("rel").split("|");if(rel_bits.length>1){item_type=rel_bits[0];item_title=rel_bits[1];var del_item_name="the "+item_type+' "'+item_title+'"';if(rel_bits.length>2){additional_text=rel_bits[2]}}else if(rel_bits.length>0){item_title=rel_bits[0];confirmation_message+=__("delete_confirm_text",[rel_bits[0]])+"</strong></h4>"}}else{item_type=$(this).data("item-type");item_title=$(this).data("item-title");additional_text=$(this).data("additional-text")}if($(this).data("delete-function")&&$.isFunction(eval($(this).data("delete-function")))){var delete_function=eval($(this).data("delete-function"))}else{var delete_function=false}if(item_title){if(item_type){var item_name="the "+item_type+' "'+item_title+'"'}else{var item_name=item_title}var delete_button_label=__("delete_button_label_custom",[item_title])}else{var item_name=__("generic_item_name");var delete_button_label=__("delete_button_label")}var confirmation_message="<h4><strong>"+__("delete_confirm_text",[item_name])+"</strong></h4>";if(additional_text){confirmation_message+="<p>"+additional_text+"</p>"}confirmation_message+="<p>"+__("cannot_undo_warning")+"</p>";if($.isFunction(delete_function)){var target_element=this}else{var target_url=$(this).attr("href");if(target_url.match(/\?/)){target_url+="&"}else{target_url+="?"}target_url+="delete_confirmed=1"}Biscuit.Crumbs.Confirm(confirmation_message,function(){if($.isFunction(delete_function)){delete_function(target_element)}else{top.location.href=target_url}},delete_button_label);return false})},AddValidation:function(e){$("#"+e).submit(function(){setTimeout("new Biscuit.Ajax.FormValidator('"+e+"');",250);return false})},FieldFullAutoAdvance:function(e,t){var n=$(e).attr("maxlength");var r=$(e).val();var i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,33,34,35,36,37,38,39,40,41,42,43,44,45,46,224];if(r.length==n&&$.inArray(t.which,i)<0){Biscuit.Console.log("Max field length reached and no special key pressed, advance to next field:");var s=$(e).parents("form:eq(0)").find("button,input,textarea,select");var o=s.index(e);if(o>-1&&o+1<s.length){var u=s.eq(o+1);Biscuit.Console.log(u);u.focus()}}}}},Ajax:{complete_callback:null,Request:function(e,t,n){if(!Biscuit.TranslationsLoaded){setTimeout(function(){Biscuit.Ajax.Request(e,t,n)},50);return}this.update_container_id=null;var r=true;n.url=e;if(n.beforeSend!=undefined){r=false;Biscuit.Console.log("You must NOT provide a custom beforeSend() function to the Ajax request function.")}if($.isFunction(n.complete)){Biscuit.Ajax.complete_callback=n.complete}else{Biscuit.Ajax.complete_callback=null}if(t=="update"&&n.update_container_id!=undefined){this.update_container_id="#"+n.update_container_id;n.update_container_id=null;n.complete=function(e,t){$("body").css({cursor:"default"});$(Biscuit.Ajax.update_container_id).html(e.responseText);if($.isFunction(Biscuit.Ajax.complete_callback)){Biscuit.Ajax.complete_callback()}}}else{n.complete=function(e,t){$("body").css({cursor:""});if($.isFunction(Biscuit.Ajax.complete_callback)){Biscuit.Ajax.complete_callback()}}}n.beforeSend=function(e){Biscuit.Ajax.SetRequestHeaders(t,e)};if(r){$("body").css({cursor:"progress"});return jQuery.ajax(n)}return null},SetRequestHeaders:function(e,t){t.setRequestHeader("X-Biscuit-Ajax-Request","true");t.setRequestHeader("X-Biscuit-Request-Type",e)},LoginHandler:function(e,t){if(t==undefined){var t=e}$("#"+e).submit(function(){Biscuit.Console.log("Submit login form");Biscuit.Crumbs.Forms.DisableSubmit(e);var n=$(this).serialize();var r=$(this).prop("action");var i="";if(r!==undefined&&r!==null){if(typeof r=="object"){i=r.value}else if(typeof r=="string"){i=r}}if(i==""){i=top.location.href}Biscuit.Ajax.Request(i,"login",{data:n,type:"post",success:function(t,n,r){$("#"+e).unbind("submit");$("#"+e).submit()},error:function(n,r){Biscuit.Crumbs.Forms.EnableSubmit(e);if(n.status==400||n.status==406||n.status==403){var i=jQuery.parseJSON(n.responseText)}if(n.status==400||n.status==406){var s=i.message;$("#"+t).effect("highlight",{color:"#ea4e2a"},800,function(){Biscuit.Crumbs.Alert(s,__("login_failed"),function(){$("#attr_username").focus()})})}else if(n.status==403&&i.redirect_page!=undefined&&i.redirect_page!=""){top.location.href=i.redirect_page}else if(n.status!=500){var o=n.status+" - "+n.statusText;Biscuit.Crumbs.Alert(__("uncaught_exception",[o]))}}});return false})},DefaultErrorHandler:function(e,t,n,r){if(t.status==500){Biscuit.Ajax.ApplicationErrorAlert(t.responseText)}else if(typeof n.error!="function"&&t.status){var i=false;if(t.status==403){var s=jQuery.parseJSON(t.responseText);if(s.redirect_page!=undefined&&s.redirect_page!=""){i=true;top.location.href=s.redirect_page}}if(!i){if(t.status!=404&&t.status!=410){var o=t.status+" - "+t.statusText;Biscuit.Crumbs.Alert(__("uncaught_exception",[o]))}}}},DefaultSetup:function(){$.ajaxSetup({beforeSend:function(e){Biscuit.Ajax.SetRequestHeaders("update",e)}});$(document).ajaxError(function(e,t,n,r){Biscuit.Ajax.DefaultErrorHandler(e,t,n,r)})},ApplicationErrorAlert:function(e){$("body").append($("<div>").attr("id","application-error-message-alert").css({display:"none"}).html(e));var t={};t[__("dismiss_button_label")]=function(){$(this).dialog("close")};return $("#application-error-message-alert").dialog({modal:true,title:__("application_error_title"),width:920,position:"center",show:"fade",hide:"fade",resizable:false,close:function(e,t){$("#application-error-message-alert").remove()},buttons:t})}}};Biscuit.Ajax.FormValidator=function(e,t){if(t===undefined){var t={}}if($(e)==null){Biscuit.Crumbs.Alert("Cannot find form: "+e);return}this._id=e;if(t.ajax_submit===undefined||t.ajax_submit===false){this._submitter=Biscuit.Crumbs.Forms.Submit}else{if(t.ajax_submit===true&&t.update_div===undefined&&t.custom_ajax_submitter===undefined&&t.complete_callback===undefined){Biscuit.Crumbs.Alert("<h4><strong>Form is mis-configured! Ajax submission requires at least one of:</strong></h4><ul><li>ID of a DIV to update with response message</li><li>A callback to run upon successful completion</li><li>A custom submit handler function</li></ul>");return}if(t.complete_callback!==undefined){this.complete_callback=t.complete_callback}if(t.custom_ajax_submitter!==undefined){this._submitter=t.custom_ajax_submitter}else{this.update_div=t.update_div;this._submitter=this.Submit}}if(t.throbber_id!==undefined){this.throbber_id=t.throbber_id}else{this.throbber_id=null}if(t.request_type!==undefined){this.request_type=t.request_type}else{this.request_type="validation"}this.Validate()};Biscuit.Ajax.FormValidator.prototype={Validate:function(){Biscuit.Crumbs.Forms.DisableSubmit(this._id);Biscuit.Crumbs.ShowThrobber(this.throbber_id);var e=$("#"+this._id).serialize();$("#"+this._id+" input[type=file]").each(function(){e+="&"+escape($(this).attr("name"))+"="+escape($(this).val())});Biscuit.Console.log(e);var t=$("#"+this._id).prop("action");Biscuit.Console.log(t);if(t==""){t=top.location.href}Biscuit.Console.log(t);var n=this;Biscuit.Ajax.Request(t,this.request_type,{data:e,type:"post",success:function(e,t,r){$("#"+n._id+" *").removeClass("error");n._submitter(n._id)},error:function(e,t){if(e.status==400||e.status==406){var r=jQuery.parseJSON(e.responseText)}if(e.status==400){Biscuit.Crumbs.Alert(r.message,__("error_box_title"))}else if(e.status==406){var i=r.messages;var s=r.invalid_fields;$("#"+n._id+" *").removeClass("error");n.HilightBadFields(s);if(i.length>0){var o="<h4><strong>"+__("please_make_corrections")+"</strong></h4><ul>";for(var u=0;u<i.length;u++){o+="<li>"+i[u]+"</li>"}o+="</ul>";Biscuit.Crumbs.Alert(o,__("error_box_title"),function(){if(s.length>0){$("input.error, select.error, textarea.error, .error input").get(0).focus()}})}}else if(e.status!=500){var a=e.status+" - "+e.statusText;Biscuit.Crumbs.Alert(__("uncaught_exception",[a]),__("error_box_title"))}Biscuit.Crumbs.Forms.EnableSubmit(n._id);$("body").css({cursor:"progress"});Biscuit.Crumbs.HideThrobber(n.throbber_id)}})},HilightBadFields:function(e){if(e.length>0){Biscuit.Console.log("Highlight invalid fields:");for(var t in e){curr_field=e[t];if(typeof curr_field=="string"){Biscuit.Console.log(e[t]);var n=$("#attr_"+e[t]);if(n){n.addClass("error");var r=$(n.parent().children("label").get(0));if(r.length==0){r=n}r.addClass("error")}}}}},Submit:function(){var e=$("#"+this._id).serialize();var t=$("#"+this._id).prop("action");if(t==""){t=top.location.href}if(this.complete_callback!=undefined){var n=this.complete_callback}if(this.update_div!=undefined){var r=this.update_div}Biscuit.Ajax.Request(t,"update",{data:e,type:"post",success:function(e){if(r!=undefined){$("#"+r).html(e)}if(n!=undefined&&typeof n=="function"){n(e)}},error:function(e,t){var n=jQuery.parseJSON(e.responseText);if(e.status==403&&n.redirect_page!=undefined&&n.redirect_page!=""){top.location.href=n.redirect_page}else{Biscuit.Ajax.Alert("<h4><strong>"+__("error_occurred")+"</strong></h4><p>"+n.message+"</p>")}}})}};String.prototype.stripSlashes=function(e){var e=this.replace(/\\'/g,"'");e=e.replace(/\\"/g,'"');e=e.replace(/\\\\/g,"\\");e=e.replace(/\\0/g,"\0");return e};var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){e=String(e);t=t||2;while(e.length<t)e="0"+e;return e};return function(i,s,o){var u=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(i)=="[object String]"&&!/\d/.test(i)){s=i;i=undefined}i=i?new Date(i):new Date;if(isNaN(i))throw SyntaxError("invalid date");s=String(u.masks[s]||s||u.masks["default"]);if(s.slice(0,4)=="UTC:"){s=s.slice(4);o=true}var a=o?"getUTC":"get",f=i[a+"Date"](),l=i[a+"Day"](),c=i[a+"Month"](),h=i[a+"FullYear"](),p=i[a+"Hours"](),d=i[a+"Minutes"](),v=i[a+"Seconds"](),m=i[a+"Milliseconds"](),g=o?0:i.getTimezoneOffset(),y={d:f,dd:r(f),ddd:__(u.strings.dayNames[l]),dddd:__(u.strings.dayNames[l+7]),m:c+1,mm:r(c+1),mmm:__(u.strings.monthNames[c]),mmmm:__(u.strings.monthNames[c+12]),yy:String(h).slice(2),yyyy:h,h:p%12||12,hh:r(p%12||12),H:p,HH:r(p),M:d,MM:r(d),s:v,ss:r(v),l:r(m,3),L:r(m>99?Math.round(m/10):m),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:o?"UTC":(String(i).match(t)||[""]).pop().replace(n,""),o:(g>0?"-":"+")+r(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10]};return s.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.strings={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(e,t){return dateFormat(this,e,t)};var __=function(e,t){if(t!=undefined){t.unshift(e)}else{var t=[e]}return $.i18n.prop.apply($,t)};$(document).ready(function(){if(typeof jQuery==undefined){alert("jQuery is required for Framework scripts to function!")}else{$.i18n.properties({name:"Messages",path:"/var/cache/js/",mode:"both",language:Biscuit.Language,callback:function(){Biscuit.TranslationsLoaded=true}});Biscuit.Crumbs.ApplyCommonButtonStyles();Biscuit.Crumbs.Forms.AddDeleteConfirmationHandlers();Biscuit.Ajax.DefaultSetup();$("input.text").keyup(function(e){Biscuit.Crumbs.Forms.FieldFullAutoAdvance(this,e)});Biscuit.Crumbs.RelativeTimeUpdate()}})
