//
// Biscuit Javascript Framework - Web 2.0 client-side compliment to the PHP back end.
// Requires jQuery and jQuery UI
//
// Author: Peter Epp
var Biscuit={Version:"1.3.5",Debug:false,Language:"en_CA",Console:{log:function(a){if(window.console!=undefined&&window.console.log!=undefined&&Biscuit.Debug){console.log(a)}}},Cookie:function(a,b,c){if(arguments.length>1&&String(b)!=="[object Object]"){c=jQuery.extend({},c);if(b===null||b===undefined){c.expires=-1}if(typeof c.expires==="number"){var d=c.expires,e=c.expires=new Date;e.setDate(e.getDate()+d)}b=String(b);return document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};var f,g=c.raw?function(a){return a}:decodeURIComponent;return(f=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?g(f[1]):null},Crumbs:{ApplyCommonButtonStyles:function(a){if(a==undefined||typeof a!="string"){var a="body"}$(a+" .delete-button").button({icons:{primary:"ui-icon-trash"}});$(a+" .new-button").button({icons:{primary:"ui-icon-plus"}});$(a+" .edit-button").button({icons:{primary:"ui-icon-pencil"}});$(a+" .cancel-button").button({icons:{primary:"ui-icon-cancel"}});$(a+" .file-button").button({icons:{primary:"ui-icon-document"}});$(a+" .image-button").button({icons:{primary:"ui-icon-image"}});$(a+" .media-button").button({icons:{primary:"ui-icon-video"}});$(a+" .save-button").button({icons:{primary:"ui-icon-disk"}});$(a+" .prev-button").button({icons:{primary:"ui-icon-triangle-1-w"}});$(a+" .next-button").button({icons:{secondary:"ui-icon-triangle-1-e"}});$(a+" .prev-button-bigjump").button({icons:{primary:"ui-icon-seek-prev"}});$(a+" .next-button-bigjump").button({icons:{secondary:"ui-icon-seek-next"}});$(a+" .seek-first-button").button({icons:{primary:"ui-icon-seek-first"}});$(a+" .seek-last-button").button({icons:{secondary:"ui-icon-seek-end"}});$(a+" .documents-button").button({icons:{primary:"ui-icon-document"}});$(a+" .images-button").button({icons:{primary:"ui-icon-image"}});$(a+" .videos-button").button({icons:{primary:"ui-icon-video"}});$(a+" .security-button").button({icons:{primary:"ui-icon-key"}});$(a+" .lock-button").button({icons:{primary:"ui-icon-locked"}});$(a+" .unlock-button").button({icons:{primary:"ui-icon-unlocked"}});$(a+" .home-button").button({icons:{primary:"ui-icon-home"}});$(a+" .flag-button").button({icons:{primary:"ui-icon-flag"}});$(a+" .mail-button").button({icons:{primary:"ui-icon-mail-closed"}});$(a+" .comment-button").button({icons:{primary:"ui-icon-comment"}});$(a+" .calendar-button").button({icons:{primary:"ui-icon-calendar"}})},RelativeTimeUpdate:function(){if($(".relative-date").length==0){return}var a=new Date;var b=new Date;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);var c=new Date;c.setTime(b.getTime()+86400*1e3);$(".relative-date").each(function(){var d=$(this).data("date");if(!d){return}var e=new Date;e.setTime(Date.parse(d));var f=(e-a)/1e3;if(f==0){$(this).text(__("time_now"))}else if(f>-60&&f<=-1){$(this).text(__("time_under_minute_ago"))}else if(f>=1&&f<60){$(this).text(__("time_in_under_minute"))}else{var g=f/60;var h=f/3600;var i=f/86400;var j=null;var k=null;var l=null;if(g>-60&&g<=-1){if(Math.round(Math.abs(g))!=1){j=__("time_minutes")}else{j=__("time_minute")}k=Math.round(Math.abs(g));l=true}else if(g>=1&&g<60){if(Math.round(Math.abs(g))!=1){j=__("time_minutes")}else{j=__("time_minute")}k=Math.round(g);l=false}else if(h<=-1&&e>=b){if(Math.round(Math.abs(h))!=1){j=__("time_hours")}else{j=__("time_hour")}k=Math.round(Math.abs(h));l=true}else if(h>=1&&e<=c){if(Math.round(Math.abs(h))!=1){j=__("time_hours")}else{j=__("time_hour")}k=Math.round(h);l=false}if(j!==null&&k!==null&&l!==null){var m=k+" "+j;if(l){var n=__("date_ago",[m])}else{var n=__("date_in",[m])}}else{if(i>=1&&i<2){var n=__("date_tomorrow_at",[e.format("shortTime")])}else if(i>=-1&&i<0){var n=__("date_yesterday_at",[e.format("shortTime")])}else if(Math.abs(i)<7){var n=__("date_at",[e.format("dddd"),e.format("shortTime")])}else{if(e.format("yyyy")!=a.format("yyyy")){var o="mmmm dS, yyyy"}else{var o="mmmm dS"}var n=__("date_at",[e.format(o),e.format("shortTime")])}}$(this).text(n)}});setTimeout("Biscuit.Crumbs.RelativeTimeUpdate();",1e3)},ShowThrobber:function(a){if(a===undefined||a===null){var a="throbber"}if(window.top.$("#"+a).length>0){window.top.$("#"+a).show()}},HideThrobber:function(a){if(a===undefined||a===null){var a="throbber"}if(window.top.$("#"+a).length>0){window.top.$("#"+a).hide()}},ShowCoverThrobber:function(a,b){if(b===undefined){var b=""}if($("#"+a+"-throbber").length>0){$("#"+a+"-throbber").text(b);if(b==""){$("#"+a+"-throbber").css({width:"50px"})}var c=$("#"+a+"-throbber-cover").width()/2-$("#"+a+"-throbber").width()/2+"px";$("#"+a+"-throbber").css({left:c})}else{var d=$("#"+a).css("position");if(d!="relative"&&d!="absolute"){$("#"+a).css({position:"relative"})}$("#"+a).css({overflow:"visible"});$("#"+a).append($("<div>").attr("id",a+"-throbber-cover").css({width:$("#"+a).width()+"px",height:$("#"+a).height()+"px",visibility:"hidden",position:"absolute",left:"0",top:"0","z-index":"10000",background:"transparent url(/framework/themes/sea_biscuit/images/cover-bg.png)"}).append($("<div>").attr("id",a+"-throbber").css({visibility:"hidden",position:"absolute",left:"0",top:"0",padding:"50px 0 0","text-align":"center","font-size":"20px",color:"#fff","font-family":"'Lucida Grande', 'Lucida Sans Unicode', sans-serif",background:"url(/framework/themes/sea_biscuit/images/throbber.gif) center 5px no-repeat"}).text(b)));if($("#"+a+"-throbber").height()+50>$("#"+a).height()){$("#"+a+"-throbber").text("").css({width:"50px",height:"1px"});if($("#"+a).height()<50){$("#"+a+"-throbber-cover").css({height:"50px"})}}else if(b==""){$("#"+a+"-throbber").css({width:"50px"})}var c=$("#"+a+"-throbber-cover").width()/2-$("#"+a+"-throbber").width()/2+"px";var e=$("#"+a+"-throbber-cover").height()/2-($("#"+a+"-throbber").height()+55)/2+"px";$("#"+a+"-throbber").css({visibility:"visible",left:c,top:e});$("#"+a+"-throbber-cover").css({display:"none",visibility:"visible"}).fadeIn("fast")}},HideCoverThrobber:function(a){$("#"+a+"-throbber-cover").fadeOut("fast",function(){$(this).remove();$("#"+a).css({position:"",overflow:""})})},Alert:function(a,b,c,d){var e=new Date;var f=e.getTime();var g="biscuit-alert-content-"+f;$("body").append($("<div>").attr("id",g).css({display:"none"}).html(a));if(b==undefined){var b=__("notice")}if(d==undefined||d==""){var d=__("dismiss_button_label")}var h={};h[d]=function(){$(this).dialog("close")};return $("#"+g).dialog({modal:true,title:b,width:560,position:"center",show:"fade",hide:"fade",resizable:false,close:function(a,b){$("#"+g).remove();if(c!=undefined&&typeof c=="function"){c()}},buttons:h})},LoadingBox:function(a){var b=new Date;var c=b.getTime();var d="biscuit-alert-content-"+c;if(a==undefined){var a=__("wait_while_loading")}a='<h4 style="text-align: center"><strong>'+a+'</strong></h4><p style="text-align: center"><img src="/framework/themes/sea_biscuit/images/throbber-light-lrg.gif" alt="'+__("wait_while_loading")+'"></p>';$("body").append($("<div>").attr("id",d).css({display:"none"}).html(a));return $("#"+d).dialog({modal:true,title:__("wait_dialog_title"),width:560,position:"center",show:"fade",hide:"fade",resizable:false,close:function(a,b){$("#"+d).remove()},buttons:{}})},Confirm:function(a,b,c,d,e){var f=new Date;var g=f.getTime();var h="biscuit-confirmation-content-"+g;$("body").append($("<div>").attr("id",h).css({display:"none"}).html(a));var i={};if(c==undefined){var c=__("confirm_button_label")}if(e==undefined){var e=__("cancel_button_label")}i[c]=function(){b();$(this).dialog("close")};i[e]=function(){if(d!=undefined&&typeof d=="function"){d()}$(this).dialog("close")};return $("#"+h).dialog({modal:true,closeOnEscape:false,title:__("confirm_box_title"),width:560,position:"center",show:"fade",hide:"fade",resizable:false,open:function(a,b){$("#"+h).prev().find(".ui-dialog-titlebar-close").hide();$("#"+h).next(".ui-dialog-buttonpane").find("button:first").addClass("attention")},close:function(a,b){$("#"+h).remove()},buttons:i})},Sortable:{create:function(a,b,c){if(window.sortable_request_token==undefined&&window.sortable_token_form_id==undefined){Biscuit.Console.log("No request token or form id provided for sortable, aborting");return}if(c.hoverclass!==undefined){$("#"+container+" "+tag).mouseover(function(){$(this).addClass(c.hoverclass)});$("#"+container+" "+tag).mouseover(function(){$(this).removeClass(c.hoverclass)})}var d=c.array_name||"sort_array";var e=c.onUpdate||function(){};var f=c.onFinish||function(){};var g=c.onError||function(){};var h=c.action||"resort";var i=c.throbber_id||null;var j={tolerance:"pointer",update:function(a,c){var g=this.id;e(g);var j=$("#"+this.id).sortable("serialize",{key:d+"[]"});j+="&request_token="+window.sortable_request_token+"&token_form_id="+window.sortable_token_form_id;var k=b+"/"+h;Biscuit.Crumbs.ShowThrobber(i);Biscuit.Ajax.Request(k,"server_action",{data:j,type:"post",complete:function(){Biscuit.Crumbs.HideThrobber(i);f(g)}})}};if(c.axis!=undefined){j.axis=c.axis}if(c.handle!=undefined){j.handle=c.handle}$(a).sortable(j);$(a).disableSelection()}},Forms:{btn_text:{},DisableSubmit:function(a){window.top.$("#"+a+" .SubmitButton").each(function(){if(Biscuit.Crumbs.Forms.btn_text[a]==undefined){Biscuit.Crumbs.Forms.btn_text[a]=$(this).val()}$(this).blur();$(this).attr("disabled","disabled");$(this).addClass("working");$(this).val(" ")});$("body").css({cursor:"progress"})},EnableSubmit:function(a){window.top.$("#"+a+" .SubmitButton").each(function(){$(this).attr("disabled","");$(this).removeClass("working");$(this).val(Biscuit.Crumbs.Forms.btn_text[a])});$("body").css({cursor:""})},Submit:function(a){$("#"+a).unbind("submit");$("#"+a).submit()},AddDeleteConfirmationHandlers:function(){$(".delete-button").live("click",function(){var item_type=null;var item_title=null;var additional_text=null;if($(this).attr("rel")!=undefined&&$(this).attr("rel")!=""){var rel_bits=$(this).attr("rel").split("|");if(rel_bits.length>1){item_type=rel_bits[0];item_title=rel_bits[1];var del_item_name="the "+item_type+' "'+item_title+'"';if(rel_bits.length>2){additional_text=rel_bits[2]}}else if(rel_bits.length>0){item_title=rel_bits[0];confirmation_message+=__("delete_confirm_text",[rel_bits[0]])+"</strong></h4>"}}else{item_type=$(this).data("item-type");item_title=$(this).data("item-title");additional_text=$(this).data("additional-text")}if($(this).data("delete-function")&&$.isFunction(eval($(this).data("delete-function")))){var delete_function=eval($(this).data("delete-function"))}else{var delete_function=false}if(item_title){if(item_type){var item_name="the "+item_type+' "'+item_title+'"'}else{var item_name=item_title}var delete_button_label=__("delete_button_label_custom",[item_title])}else{var item_name=__("generic_item_name");var delete_button_label=__("delete_button_label")}var confirmation_message="<h4><strong>"+__("delete_confirm_text",[item_name])+"</strong></h4>";if(additional_text){confirmation_message+="<p>"+additional_text+"</p>"}confirmation_message+="<p>"+__("cannot_undo_warning")+"</p>";if($.isFunction(delete_function)){var target_element=this}else{var target_url=$(this).attr("href");if(target_url.match(/\?/)){target_url+="&"}else{target_url+="?"}target_url+="delete_confirmed=1"}Biscuit.Crumbs.Confirm(confirmation_message,function(){if($.isFunction(delete_function)){delete_function(target_element)}else{top.location.href=target_url}},delete_button_label);return false})},AddValidation:function(a){$("#"+a).submit(function(){setTimeout("new Biscuit.Ajax.FormValidator('"+a+"');",250);return false})},FieldFullAutoAdvance:function(a,b){Biscuit.Console.log("Key pressed: "+b.which);var c=$(a).attr("maxlength");var d=$(a).val();var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,33,34,35,36,37,38,39,40,41,42,43,44,45,46,224];if(d.length==c&&!e.inArray(b.which)){Biscuit.Console.log("Max field length reached and no special key pressed, advance to next field:");var f=$(a).parents("form:eq(0)").find("button,input,textarea,select");var g=f.index(a);if(g>-1&&g+1<f.length){var h=f.eq(g+1);Biscuit.Console.log(h);h.focus()}}}}},Ajax:{complete_callback:null,Request:function(a,b,c){this.update_container_id=null;var d=true;c.url=a;if(c.beforeSend!=undefined){d=false;Biscuit.Console.log("You must NOT provide a custom beforeSend() function to the Ajax request function.")}if($.isFunction(c.complete)){Biscuit.Ajax.complete_callback=c.complete}else{Biscuit.Ajax.complete_callback=null}if(b=="update"&&c.update_container_id!=undefined){this.update_container_id="#"+c.update_container_id;c.update_container_id=null;c.complete=function(a,b){$("body").css({cursor:"default"});$(Biscuit.Ajax.update_container_id).html(a.responseText);if($.isFunction(Biscuit.Ajax.complete_callback)){Biscuit.Ajax.complete_callback()}}}else{c.complete=function(a,b){$("body").css({cursor:""});if($.isFunction(Biscuit.Ajax.complete_callback)){Biscuit.Ajax.complete_callback()}}}c.beforeSend=function(a){Biscuit.Ajax.SetRequestHeaders(b,a)};if(d){$("body").css({cursor:"progress"});jQuery.ajax(c)}},SetRequestHeaders:function(a,b){b.setRequestHeader("X-Biscuit-Ajax-Request","true");b.setRequestHeader("X-Biscuit-Request-Type",a)},LoginHandler:function(a,b){if(b==undefined){var b=a}$("#"+a).submit(function(){Biscuit.Crumbs.Forms.DisableSubmit(a);var c=$(this).serialize();var d=$(this).attr("action");var e="";if(d!==undefined&&d!==null){if(typeof d=="object"){e=d.value}else if(typeof d=="string"){e=d}}if(e==""){e=top.location.href}Biscuit.Ajax.Request(e,"login",{data:c,type:"post",success:function(b,c,d){$("#"+a).unbind("submit");$("#"+a).submit()},error:function(c,d){Biscuit.Crumbs.Forms.EnableSubmit(a);if(c.status==400||c.status==406){var e=jQuery.parseJSON(c.responseText);var f=e.message;$("#"+b).effect("highlight",{color:"#ea4e2a"},800,function(){Biscuit.Crumbs.Alert(f,__("login_failed"),function(){$("#attr_username").focus()})})}else{var g=c.status+" - "+c.statusText;Biscuit.Crumbs.Alert(__("uncaught_exception",[g]))}}});return false})},DefaultErrorHandler:function(a,b,c,d){if(typeof c.error!="function"&&b.status&&b.status!=404&&b.status!=410){var e=b.status+" - "+b.statusText;Biscuit.Crumbs.Alert(__("uncaught_exception",[e]))}},DefaultSetup:function(){$.ajaxSetup({beforeSend:function(a){Biscuit.Ajax.SetRequestHeaders("update",a)}});$(document).ajaxError(function(a,b,c,d){Biscuit.Ajax.DefaultErrorHandler(a,b,c,d)})}}};Biscuit.Ajax.FormValidator=function(a,b){if(b===undefined){var b={}}if($(a)==null){Biscuit.Crumbs.Alert("Cannot find form: "+a);return}this._id=a;if(b.ajax_submit===undefined||b.ajax_submit===false){this._submitter=Biscuit.Crumbs.Forms.Submit}else{if(b.ajax_submit===true&&b.update_div===undefined&&b.custom_ajax_submitter===undefined&&b.complete_callback===undefined){Biscuit.Crumbs.Alert("<h4><strong>Form is mis-configured! Ajax submission requires at least one of:</strong></h4><ul><li>ID of a DIV to update with response message</li><li>A callback to run upon successful completion</li><li>A custom submit handler function</li></ul>");return}if(b.complete_callback!==undefined){this.complete_callback=b.complete_callback}if(b.custom_ajax_submitter!==undefined){this._submitter=b.custom_ajax_submitter}else{this.update_div=b.update_div;this._submitter=this.Submit}}if(b.throbber_id!==undefined){this.throbber_id=b.throbber_id}else{this.throbber_id=null}if(b.request_type!==undefined){this.request_type=b.request_type}else{this.request_type="validation"}this.Validate()};Biscuit.Ajax.FormValidator.prototype={Validate:function(){Biscuit.Crumbs.Forms.DisableSubmit(this._id);Biscuit.Crumbs.ShowThrobber(this.throbber_id);var a=$("#"+this._id).serialize();$("#"+this._id+" input[type=file]").each(function(){a+="&"+escape($(this).attr("name"))+"="+escape($(this).val())});var b=$("#"+this._id).attr("action");if(b==""){b=top.location.href}var c=this;Biscuit.Ajax.Request(b,this.request_type,{data:a,type:"post",success:function(a,b,d){$("#"+c._id+" *").removeClass("error");c._submitter(c._id)},error:function(a,b){if(a.status==400||a.status==406){var d=jQuery.parseJSON(a.responseText)}if(a.status==400){Biscuit.Crumbs.Alert(d.message,__("error_box_title"))}else if(a.status==406){var e=d.messages;var f=d.invalid_fields;$("#"+c._id+" *").removeClass("error");c.HilightBadFields(f);if(e.length>0){var g="<h4><strong>"+__("please_make_corrections")+"</strong></h4><ul>";for(var h=0;h<e.length;h++){g+="<li>"+e[h]+"</li>"}g+="</ul>";Biscuit.Crumbs.Alert(g,__("error_box_title"),function(){if(f.length>0){$("input.error, select.error, textarea.error, .error input").get(0).focus()}})}}else{var i=a.status+" - "+a.statusText;Biscuit.Crumbs.Alert(__("uncaught_exception",[i]),__("error_box_title"))}Biscuit.Crumbs.Forms.EnableSubmit(c._id);$("body").css({cursor:"progress"});Biscuit.Crumbs.HideThrobber(c.throbber_id)}})},HilightBadFields:function(a){if(a.length>0){Biscuit.Console.log("Highlight invalid fields:");for(var b in a){curr_field=a[b];if(typeof curr_field=="string"){Biscuit.Console.log(a[b]);var c=$("#attr_"+a[b]);if(c){c.addClass("error");var d=$(c.parent().children("label").get(0));if(d.length==0){d=c}d.addClass("error")}}}}},Submit:function(){var a=$("#"+this._id).serialize();var b=$("#"+this._id).attr("action");if(b==""){b=top.location.href}if(this.complete_callback!=undefined){var c=this.complete_callback}if(this.update_div!=undefined){var d=this.update_div}Biscuit.Ajax.Request(b,"update",{data:a,type:"post",success:function(a){if(d!=undefined){$("#"+d).html(a)}if(c!=undefined&&typeof c=="function"){c(a)}},error:function(a,b){var c=jQuery.parseJSON(a.responseText);Biscuit.Ajax.Alert("<h4><strong>"+__("error_occurred")+"</strong></h4><p>"+c.message+"</p>")}})}};String.prototype.stripSlashes=function(a){var a=this.replace(/\\'/g,"'");a=a.replace(/\\"/g,'"');a=a.replace(/\\\\/g,"\\");a=a.replace(/\\0/g,"�");return a};Array.prototype.inArray=function(a){for(i=0;i<this.length;i++){if(this[i]==a){return true;break}}return false};var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){a=String(a);b=b||2;while(a.length<b)a="0"+a;return a};return function(e,f,g){var h=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(e)=="[object String]"&&!/\d/.test(e)){f=e;e=undefined}e=e?new Date(e):new Date;if(isNaN(e))throw SyntaxError("invalid date");f=String(h.masks[f]||f||h.masks["default"]);if(f.slice(0,4)=="UTC:"){f=f.slice(4);g=true}var i=g?"getUTC":"get",j=e[i+"Date"](),k=e[i+"Day"](),l=e[i+"Month"](),m=e[i+"FullYear"](),n=e[i+"Hours"](),o=e[i+"Minutes"](),p=e[i+"Seconds"](),q=e[i+"Milliseconds"](),r=g?0:e.getTimezoneOffset(),s={d:j,dd:d(j),ddd:__(h.strings.dayNames[k]),dddd:__(h.strings.dayNames[k+7]),m:l+1,mm:d(l+1),mmm:__(h.strings.monthNames[l]),mmmm:__(h.strings.monthNames[l+12]),yy:String(m).slice(2),yyyy:m,h:n%12||12,hh:d(n%12||12),H:n,HH:d(n),M:o,MM:d(o),s:p,ss:d(p),l:d(q,3),L:d(q>99?Math.round(q/10):q),t:n<12?"a":"p",tt:n<12?"am":"pm",T:n<12?"A":"P",TT:n<12?"AM":"PM",Z:g?"UTC":(String(e).match(b)||[""]).pop().replace(c,""),o:(r>0?"-":"+")+d(Math.floor(Math.abs(r)/60)*100+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(j%100-j%10!=10)*j%10]};return f.replace(a,function(a){return a in s?s[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.strings={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};var __=$.i18n.prop;$(document).ready(function(){if(typeof jQuery==undefined){alert("jQuery is required for Framework scripts to function!")}else{Biscuit.Crumbs.ApplyCommonButtonStyles();Biscuit.Crumbs.Forms.AddDeleteConfirmationHandlers();Biscuit.Ajax.DefaultSetup();$.i18n.properties({name:"Messages",path:"/var/cache/js/",mode:"both",language:Biscuit.Language});$("input.text").keyup(function(a){Biscuit.Crumbs.Forms.FieldFullAutoAdvance(this,a)});Biscuit.Crumbs.RelativeTimeUpdate()}})
